@(questions: List[Question], qForm: Form[UserAnswer], score: Long, action: String, qcms: List[Qcm], answeredQuestIds: List[Long], user: User)

@import helper._
@main("QCM", user){
    @if(action == null || "".equals(action)){
        @if(qcms.size() > 0 ){
            <h2>Qcms disponibles : </h2>
            @for(qcm <- qcms){
                @form(routes.QcmController.tester(qcm.id), args = 'class -> "inlineForms"){
                    @qcm.name <input type="submit" value="GO"/>
                }
            }
        }
    }

    @if("EVAL".equals(action)){
        <h1>Nombre de questions :  @questions.size()</h1>
        @if(score > 0 ){
            <h1>score actuel : @score</h1>
        }

        <h2>QCM : @questions.get(0).qcm.name</h2>
        <ul>
        @for(quest <- questions){
            @if(answeredQuestIds.size() == 0 || !answeredQuestIds.contains(quest.id)){
                <h3>@quest.text</h3>
                @form(routes.QcmController.validateResponses(), args = 'class -> "inlineForms"){
                    <input type="hidden" name="questionId" id="questionId" value="@quest.id"/>
                    @for(choice <- quest.possibleResp){
                        <input type="checkbox" name="selectedChoices" value="@choice.id"/>@choice.libelle<BR>
                    }
                    <input type="submit" value="Valider"/>
                }
            }
        }
        </ul>

        <ul>
            @form(routes.QcmController.score()){
                <input type="submit" value="Evaluer"/>
            }
        </ul>
    }
}
